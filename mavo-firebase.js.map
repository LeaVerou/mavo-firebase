{"version":3,"sources":["./src/mavo-firebase.js"],"names":["$","window","Bliss","Mavo","Backend","register","Class","extends","id","constructor","databaseUrl","_this","this","mavo","config","getPermissions","attr","split","ready","then","initUsingAttributes","test","apiKey","element","getAttribute","authDomain","databaseURL","storageBucket","error","firebase","apps","length","app","initializeApp","concat","default","options","statusChangesCallbacks","unauthenticatedPermissionsAttr","authenticatedPermissions","unauthenticatedPermissions","includes","defaultPermissions","authenticated","unauthenticated","permissions","on","db","database","ref","storage","upload","file","child","name","Date","now","put","getDownloadURL","auth","onAuthStateChanged","user","off","username","email","displayName","avatar","photoURL","message","serverPushAttr","setListenForChanges","onStatusChange","callback","_this2","push","listeningOnStatus","snap","forEach","val","bool","_this3","listeningForChanges","snapshot","doc","compareDocRevs","_rev","rev","onNewData","data","render","load","_this4","once","store","_this5","Promise","resolve","storeData","unsavedChanges","storing","_this6","transaction","currentData","Number","isInteger","Object","assign","login","_this7","provider","GoogleAuthProvider","signInWithPopup","catch","reject","logout","_this8","signOut","docA","docB","_this9","include","static","url"],"mappings":"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"}