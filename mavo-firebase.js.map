{"version":3,"sources":["./src/mavo-firebase.js"],"names":["$","window","Bliss","Mavo","Backend","register","Class","extends","id","constructor","databaseUrl","_this","this","mavo","config","getPermissions","attr","split","ready","include","firebase","then","initUsingAttributes","test","apiKey","element","getAttribute","authDomain","databaseURL","storageBucket","error","apps","length","app","initializeApp","concat","default","options","statusChangesCallbacks","unauthenticatedPermissionsAttr","authenticatedPermissions","unauthenticatedPermissions","includes","defaultPermissions","authenticated","unauthenticated","permissions","on","db","database","ref","storage","upload","file","child","name","Date","now","put","getDownloadURL","auth","onAuthStateChanged","user","off","username","email","displayName","avatar","photoURL","message","serverPushAttr","setListenForChanges","onStatusChange","callback","_this2","push","listeningOnStatus","snap","forEach","val","bool","_this3","listeningForChanges","snapshot","doc","compareDocRevs","_rev","rev","onNewData","data","render","load","_this4","once","store","_this5","Promise","resolve","storeData","unsavedChanges","storing","_this6","transaction","currentData","Number","isInteger","Object","assign","login","_this7","provider","GoogleAuthProvider","signInWithPopup","catch","reject","logout","_this8","signOut","docA","docB","static","url"],"mappings":"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"}